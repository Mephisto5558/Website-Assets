import{getGroupId}from"./utils.js";function getNumberAmounts(e){return e.flat().reduce((e,t)=>e.set(t,(e.get(t)??0)+1),new Map)}function createHTMLBoard(a){var r=Math.sqrt(a);if(!Number.isInteger(r))throw new Error("Size must be quadratic.");console.debug("Creating HTML board of size "+a);var o=document.querySelector("#sudoku");o.innerHTML="";for(let e=0;e<r;e++){var t=document.createElement("colgroup");for(let e=0;e<r;e++)t.append(document.createElement("col"));o.append(t)}for(let t=0;t<r;t++){var n=document.createElement("tbody");for(let e=0;e<r;e++){var d=document.createElement("tr"),u=t*r+e;for(let e=0;e<a;e++){var l=document.createElement("td"),c=document.createElement("input"),m=(c.type="number",c.title="",c.required=!0,c.autocomplete="off",c.dataset.row=u+1,c.dataset.col=e+1,c.dataset.group=getGroupId(u,e,r)+1,c.ariaLabel=`Row ${u+1}, Column `+(e+1),document.createElement("div"));m.classList.add("notes"),m.append(...Array.from({length:8},(e,t)=>{var a=document.createElement("span");return a.contentEditable="plaintext-only",a.dataset.note=t+Number(3<t)+1,a})),l.append(c),l.append(m),d.append(l)}n.append(d)}o.append(n)}}function createHTMLOverviewSpans(e){var a=Math.sqrt(e);if(!Number.isInteger(a))throw new Error("Size must be quadratic.");console.debug("Creating HTML overview span of size "+e);var e=document.querySelector("#number-overview"),r=(e.innerHTML="",document.createElement("tbody"));for(let t=0;t<a;t++){var o=document.createElement("tr");for(let e=0;e<a;e++){var n=document.createElement("td"),d=document.createElement("span");d.textContent="0",n.textContent=a*t+e+1+": ",n.append(d),o.append(n)}r.append(o)}return e.append(r),e}function displayBoard(e,t,a,r=!1){for(var o of t.flat())r||o.classList.remove("solution"),r&&!o.disabled&&(o.value&&(o.dataset.val=o.value),o.classList.add("solution")),o.value=e[Number(o.dataset.row)-1][Number(o.dataset.col)-1]||Number(o.dataset.val)||void 0,o.disabled=r||!!o.value&&!o.dataset.val,r||delete o.dataset.val;for(var[n,d]of getNumberAmounts(e))n&&(a[n-1].textContent=d,a[n-1].classList[globalThis.fullBoardNumberAmt.get(n)==d?"add":"remove"]("complete"))}export{getNumberAmounts,createHTMLBoard,createHTMLOverviewSpans,displayBoard};