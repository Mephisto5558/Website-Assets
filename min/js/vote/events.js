import{searchBoxElement,msInSecond,headerContainer,WINDOW_WIDTH_RELOAD_TRESHOLD,ADDITIONAL_HEADER_MARGIN}from"./constants.js";import{debounce,displayCards,toggleCardDisplayMode,setColorScheme}from"./utils.js";import state from"./state.js";export default void 0;searchBoxElement.addEventListener("input",debounce(({target:e})=>{e.value.length>e.maxLength&&(e.value=e.value.slice(0,e.maxLength)),state.cardsOffset=0;e=displayCards(e.value);document.querySelector("#feature-request-count > span").textContent=e.length},msInSecond/2)),headerContainer.querySelector("#toggle-cards-display").addEventListener("click",()=>toggleCardDisplayMode()),headerContainer.querySelector("#toggle-color-scheme").addEventListener("click",()=>setColorScheme()),window.addEventListener("scroll",()=>{state.cardsCache.size>state.cardsOffset&&document.documentElement.scrollTop+document.documentElement.clientHeight>=document.documentElement.scrollHeight-ADDITIONAL_HEADER_MARGIN&&displayCards()});let oldWindowWidth=window.innerWidth;window.addEventListener("resize",debounce(()=>{var e=window.innerWidth;oldWindowWidth>=WINDOW_WIDTH_RELOAD_TRESHOLD&&e<WINDOW_WIDTH_RELOAD_TRESHOLD||oldWindowWidth<WINDOW_WIDTH_RELOAD_TRESHOLD&&WINDOW_WIDTH_RELOAD_TRESHOLD<=e?globalThis.location.reload():oldWindowWidth=e},msInSecond/2)),window.addEventListener("beforeunload",e=>{document.body.querySelectorAll(".card[modified]").length&&e.preventDefault()});